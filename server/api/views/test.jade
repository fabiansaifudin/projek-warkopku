//- doctype html
//- html(lang="en")
//-     head
//-         meta(charset="UTF-8")
//-         meta(http-equiv="X-UA-Compatible", content="IE=edge")
//-         meta(name="viewport", content="width=device-width, initial-scale=1.0")
//-         title Reset Password
//-         link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css")
//-         script(src="https://cdn.jsdelivr.net/npm/socket.io-client@2.3.0/dist/socket.io.min.js")
//-         script(type='text/javascript').
//-             const socket = io('localhost:3000');

//-             socket.on('welcome', (msg) => {
//-                 let messages = document.getElementById('header');

//-                 messages.innerHTML = msg.message
//-             });
            
//-             function addMessage(message) {
//-                 var text = document.createTextNode(message),
//-                     el = document.createElement('li'),
//-                     messages = document.getElementById('header');

//-                 el.appendChild(text);
//-                 messages.appendChild(el);
//-             }
//-     body
//-         .container
//-             .row
//-                 .col-sm-9.col-md-7.col-lg-5.mx-auto
//-                     .card.p-3.mb-5.my-5
//-                         .card-body
//-                             h5#header.display-5.text-center.fs-3.mb-4 New Password
//-                             #chart
//-                                 canvas#canvas(style="width:100%;max-width:700px")
//-         script(src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js")
//-         script(src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js')
//-         script(src='https://cdn.jsdelivr.net/npm/chartjs-plugin-streaming@1.8.0')
//-         script(type="text/javascript").
//- doctype html
//- html(lang='en')
//-     head
//-         meta(charset='UTF-8')
//-         title CodePen - ChartJs Realtime Performance Test
//-         link(rel='stylesheet' href='./style.css')
//-         script(src="https://cdn.jsdelivr.net/npm/socket.io-client@2.3.0/dist/socket.io.min.js")
//-     body
//-         p
//-             button#addDataset Add Dataset
//-             button#removeDataset Remove Dataset
//-             button#addData Add Data
//-             button#stopData Stop Data Feed
//-             button#pauseGraph Pause Graph
//-             select#frameRate
//-                 option(value='1') 1 FPS
//-                 option(value='5') 5 FPS
//-                 option(value='10') 10 FPS
//-                 option(value='15') 15 FPS
//-                 option(value='20') 20 FPS
//-                 option(value='30') 30 FPS
//-                 option(value='60') 60 FPS
//-             select#duration
//-                 option(value='10000') 10s
//-                 option(value='20000') 20s
//-                 option(value='30000') 30s
//-                 option(value='60000') 1min
//-                 option(value='120000') 2min
//-                 option(value='300000') 5min
//-             span#datapoints 0
//-             span  Datapoints
//-         .chart-container(style='position:relative;height:80vh; width:90vw')
//-             canvas#myChart
//-         //- partial
//-         script(src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js')
//-         script(src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js')
//-         script(src='https://cdn.jsdelivr.net/npm/chartjs-plugin-streaming@1.8.0')
//-         script(type="text/javascript").
//-             const socket = io('localhost:3000');

//-             socket.on('chart', function(data) {
//-                 console.log(data)
//-             })

//-             var chartColors = {
//-                 red: "rgb(255, 99, 132)",
//-                 orange: "rgb(255, 159, 64)",
//-                 yellow: "rgb(255, 205, 86)",
//-                 green: "rgb(75, 192, 192)",
//-                 blue: "rgb(54, 162, 235)",
//-                 purple: "rgb(153, 102, 255)",
//-                 grey: "rgb(201, 203, 207)"
//-             };

//-             function randomScalingFactor(previousValue) {
//-                 return (
//-                     previousValue +
//-                     (Math.random() > 0.5 ? 1.0 : -1.0) * Math.round(Math.random() * 25)
//-                 );
//-             }

//-             function onRefresh(chart) {
//-                 if (stopData) return;
//-                 chart.config.data.datasets.forEach(function (dataset) {
//-                     dataset.data.push({
//-                         x: Date.now(),
//-                         y: randomScalingFactor(
//-                             dataset.data.length > 0 ? dataset.data[dataset.data.length - 1].y : 0
//-                         )
//-                     });
//-                 });
//-             }

//-             var color = Chart.helpers.color;
//-             var config = {
//-                 type: "line",
//-                 data: {
//-                     datasets: [
//-                         {
//-                             label: "Channel 1",
//-                             backgroundColor: "rgba(255, 0, 0, 0.7)",
//-                             borderColor: "rgba(255, 0, 0, 0.7)",
//-                             borderWidth: 2,
//-                             fill: false,
//-                             lineTension: 0,
//-                             yAxisID: "right",
//-                             data: []
//-                         },
//-                         {
//-                             label: "Channel 2",
//-                             backgroundColor: color(chartColors.blue).alpha(1).rgbString(),
//-                             borderColor: chartColors.blue,
//-                             borderWidth: 1.5,
//-                             fill: false,
//-                             lineTension: 0,
//-                             data: []
//-                         }
//-                     ]
//-                 },
//-                 options: {
//-                     maintainAspectRatio: false,
//-                     elements: {
//-                         point: {
//-                             radius: 0
//-                         }
//-                     },
//-                     title: {
//-                         display: true,
//-                         text: "Line chart (hotizontal scroll) sample"
//-                     },
//-                     scales: {
//-                         xAxes: [
//-                             {
//-                                 type: "realtime",
//-                                 gridLines: {
//-                                     display: true
//-                                 },
//-                                 time: {
//-                                     unit: "second",
//-                                     stepSize: 1,
//-                                     round: true,
//-                                     displayFormats: {
//-                                         minute: "HH:mm",
//-                                         second: "HH:mm:ss"
//-                                     }
//-                                 },
//-                                 realtime: {
//-                                     duration: 10 * 1000,
//-                                     refresh: 10,
//-                                     delay: 200,
//-                                     onRefresh: onRefresh
//-                                 }
//-                             }
//-                         ],
//-                         yAxes: [
//-                             {
//-                                 scaleLabel: {
//-                                     display: true,
//-                                     labelString: "value"
//-                                 }
//-                             },
//-                             {
//-                                 id: "right",
//-                                 position: "right",
//-                                 ticks: {
//-                                     fontColor: "rgba(255, 0, 0, 0.7)"
//-                                 },
//-                                 gridLines: {
//-                                     color: "rgba(255, 0, 0, 0.7)",
//-                                     drawOnChartArea: false
//-                                 },
//-                                 scaleLabel: {
//-                                     display: true,
//-                                     labelString: "another",
//-                                     fontColor: "rgba(255, 0, 0, 0.7)"
//-                                 }
//-                             }
//-                         ]
//-                     },
//-                     tooltips: {
//-                         mode: "nearest",
//-                         intersect: false
//-                     },
//-                     hover: {
//-                         mode: "nearest",
//-                         intersect: false
//-                     },
//-                     plugins: {
//-                         streaming: {
//-                             frameRate: 60
//-                         }
//-                     }
//-                 }
//-             };

//-             window.onload = function () {
//-             var ctx = document.getElementById("myChart").getContext("2d");
//-             window.myChart = new Chart(ctx, config);
//-             };
//-             var datapointsElement = document.getElementById("datapoints");

//-             var colorNames = Object.keys(chartColors);
//-             document.getElementById("addDataset").addEventListener("click", function () {
//-             var colorName = colorNames[config.data.datasets.length % colorNames.length];
//-             var newColor = chartColors[colorName];
//-             var newDataset = {
//-                 label: "Channel " + (config.data.datasets.length + 1),
//-                 backgroundColor: color(newColor).alpha(1).rgbString(),
//-                 borderColor: newColor,
//-                 borderWidth: 1,
//-                 fill: false,
//-                 lineTension: 0,
//-                 data: []
//-             };

//-             config.data.datasets.push(newDataset);
//-             window.myChart.update();
//-             });

//-             document.getElementById("removeDataset").addEventListener("click", function () {
//-             config.data.datasets.pop();
//-             window.myChart.update();
//-             });

//-             document.getElementById("addData").addEventListener("click", function () {
//-             onRefresh(window.myChart);
//-             window.myChart.update();
//-             });

//-             document.getElementById("pauseGraph").addEventListener("click", function () {
//-             window.myChart.options.scales.xAxes[0].realtime.pause = !window.myChart
//-                 .options.scales.xAxes[0].realtime.pause;
//-             //window.myChart.update({duration: 0});
//-             });

//-             document.getElementById("frameRate").addEventListener("change", function () {
//-             window.myChart.options.plugins.streaming.frameRate = +this.value;
//-             window.myChart.update({ duration: 0 });
//-             //window.myChart.update({duration: 0});
//-             });

//-             document.getElementById("duration").addEventListener("change", function () {
//-             var rate = document.getElementById("duration").value;
//-             window.myChart.options.scales.xAxes[0].realtime.duration = +this.value;
//-             //window.myChart.update({duration: 0});
//-             });

//-             var stopData = false;
//-             document.getElementById("stopData").addEventListener("click", function () {
//-             stopData = !stopData;
//-             });
doctype html
html
    head
        title Socket.IO chat
        style.
            body { margin: 0; padding-bottom: 3rem; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
            #form { background: rgba(0, 0, 0, 0.15); padding: 0.25rem; position: fixed; bottom: 0; left: 0; right: 0; display: flex; height: 3rem; box-sizing: border-box; backdrop-filter: blur(10px); }
            #input { border: none; padding: 0 1rem; flex-grow: 1; border-radius: 2rem; margin: 0.25rem; }
            #input:focus { outline: none; }
            #form > button { background: #333; border: none; padding: 0 1rem; margin: 0.25rem; border-radius: 3px; outline: none; color: #fff; }
            #messages { list-style-type: none; margin: 0; padding: 0; }
            #messages > li { padding: 0.5rem 1rem; }
            #messages > li:nth-child(odd) { background: #efefef; }
    body
        ul#messages
        form#form(action='')
            input#input(autocomplete='off')
            button Send
        script(src='https://cdn.jsdelivr.net/npm/socket.io-client@2.3.0/dist/socket.io.min.js')
        script.
            var socket = io();
            var messages = document.getElementById('messages');
            var form = document.getElementById('form');
            var input = document.getElementById('input');
            //- form.addEventListener('submit', function(e) {
            //-     e.preventDefault();
            //-     if (input.value) {
            //-         socket.emit('chat message', input.value);
            //-         input.value = '';
            //-     }
            //- });
            //- socket.emit('interface', input.value);
            socket.on('resource', function(msg) {
                console.log(msg)
            });

